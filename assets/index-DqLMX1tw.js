var Ne=Object.defineProperty;var Be=(e,t,n)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var se=(e,t,n)=>(Be(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function W(){}function Ae(e){return e()}function Le(){return Object.create(null)}function X(e){e.forEach(Ae)}function je(e){return typeof e=="function"}function De(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let re;function Me(e,t){return e===t?!0:(re||(re=document.createElement("a")),re.href=t,e===re.href)}function Fe(e){return Object.keys(e).length===0}function c(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function U(e){e.parentNode&&e.parentNode.removeChild(e)}function He(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function Ie(e){return document.createTextNode(e)}function v(){return Ie(" ")}function qe(){return Ie("")}function k(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function B(e){return e===""?null:+e}function Ge(e){return Array.from(e.childNodes)}function I(e,t){e.value=t??""}function Oe(e,t,n){for(let o=0;o<e.options.length;o+=1){const l=e.options[o];if(l.__value===t){l.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ve(e){const t=e.querySelector(":checked");return t&&t.__value}let ee;function z(e){ee=e}function Ke(){if(!ee)throw new Error("Function called outside component initialization");return ee}function We(e){Ke().$$.on_mount.push(e)}const G=[],ke=[];let K=[];const Ce=[],Xe=Promise.resolve();let de=!1;function Je(){de||(de=!0,Xe.then(Te))}function ie(e){K.push(e)}const fe=new Set;let q=0;function Te(){if(q!==0)return;const e=ee;do{try{for(;q<G.length;){const t=G[q];q++,z(t),Qe(t.$$)}}catch(t){throw G.length=0,q=0,t}for(z(null),G.length=0,q=0;ke.length;)ke.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];fe.has(n)||(fe.add(n),n())}K.length=0}while(G.length);for(;Ce.length;)Ce.pop()();de=!1,fe.clear(),z(e)}function Qe(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}function Ye(e){const t=[],n=[];K.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),K=t}const Ze=new Set;function Se(e,t){e&&e.i&&(Ze.delete(e),e.i(t))}function $e(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ze(e,t,n){const{fragment:o,after_update:l}=e.$$;o&&o.m(t,n),ie(()=>{const a=e.$$.on_mount.map(Ae).filter(je);e.$$.on_destroy?e.$$.on_destroy.push(...a):X(a),e.$$.on_mount=[]}),l.forEach(ie)}function et(e,t){const n=e.$$;n.fragment!==null&&(Ye(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(e,t){e.$$.dirty[0]===-1&&(G.push(e),Je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function nt(e,t,n,o,l,a,d=null,y=[-1]){const b=ee;z(e);const r=e.$$={fragment:null,ctx:[],props:a,update:W,not_equal:l,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(b?b.$$.context:[])),callbacks:Le(),dirty:y,skip_bound:!1,root:t.target||b.$$.root};d&&d(r.root);let i=!1;if(r.ctx=n?n(e,t.props||{},(s,f,..._)=>{const M=_.length?_[0]:f;return r.ctx&&l(r.ctx[s],r.ctx[s]=M)&&(!r.skip_bound&&r.bound[s]&&r.bound[s](M),i&&tt(e,s)),f}):[],r.update(),i=!0,X(r.before_update),r.fragment=o?o(r.ctx):!1,t.target){if(t.hydrate){const s=Ge(t.target);r.fragment&&r.fragment.l(s),s.forEach(U)}else r.fragment&&r.fragment.c();t.intro&&Se(e.$$.fragment),ze(e,t.target,t.anchor),Te()}z(b)}class ot{constructor(){se(this,"$$");se(this,"$$set")}$destroy(){et(this,1),this.$destroy=W}$on(t,n){if(!je(n))return W;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(t){this.$$set&&!Fe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const lt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(lt);function rt(e){if(e==null)throw new Error("Value is nullish.")}function it(e){for(var t=0,n=2166136261;t<e.length;t++)n=Math.imul(n^e.charCodeAt(t),16777619);n+=n<<13,n^=n>>>7,n+=n<<3,n^=n>>>17;let o=(n+=n<<5)>>>0,l=()=>(2**31-1&(o=Math.imul(48271,o)))/2**31;return l(),l}function V(e,t){const n=document.createElement("canvas"),o=n.getContext("2d");if(n.width=e,n.height=t,!o)throw new Error("Could not create context.");return{canvas:n,context:o,width:e,height:t,destroy(){n.width=0,n.height=0}}}function at(e,t,n){const o=t.getImageData(0,0,e.width,e.height),l=o.data;for(let a=0;a<l.length;a+=4){const d=l[a+0],y=l[a+1],b=l[a+2],r=l[a+3],i=(d+y+b)/3,s=Math.round(i/255*n)*255/n;l[a+0]=s,l[a+1]=s,l[a+2]=s,l[a+3]=Math.round(r/255)*255}t.putImageData(o,0,0)}function S(e,t,n,o){e.fillStyle="black",e.beginPath(),e.arc(t,n,o,0,Math.PI*2),e.closePath(),e.fill()}function pe(e,t,n,o,l,a){e.lineWidth=a,e.strokeStyle="black",e.beginPath(),e.moveTo(t,n),e.lineTo(o,l),e.stroke()}function ut({gridSize:e,dotScale:t,lineScale:n,width:o,height:l,posterizationRange:a,seed:d}){const y=it(d);function b({width:_,height:M},m,u){const p=V(e,e);S(p.context,0,0,u),S(p.context,e,0,u),S(p.context,0,e,u),S(p.context,e,e,u),S(p.context,e*.5,e*.5,u);const w=m.createPattern(p.canvas,"repeat");rt(w),m.fillStyle=w,m.fillRect(0,0,_,M),p.destroy()}function r({width:_,height:M},m,u){const p=V(e,e);pe(p.context,0,0,e,e,u),p.context.save(),p.context.translate(e*.5,e*-.5),pe(p.context,0,0,e,e,u),p.context.restore(),p.context.translate(e*-.5,e*.5),pe(p.context,0,0,e,e,u);const w=V(e,e);w.context.translate(e,0),w.context.scale(-1,1),w.context.drawImage(p.canvas,0,0);const C=V(e,e);C.context.drawImage(p.canvas,0,0),C.context.drawImage(w.canvas,0,0);const O=[p,w,C],F=O.length;for(let A=0;A<_;A+=e)for(let N=0;N<M;N+=e){const H=O[Math.floor(y()*F)];m.drawImage(H.canvas,A,N)}O.forEach(A=>A.destroy())}const i=V(o,l);i.context.fillStyle="white",i.context.fillRect(0,0,o,l);const s=e*t*.33,f=s*n*2;return r(i.canvas,i.context,f),b(i.canvas,i.context,s),at(i.canvas,i.context,a),i.canvas}var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ue={exports:{}};(function(e,t){(function(n,o){o()})($,function(){function n(r,i){return typeof i>"u"?i={autoBom:!1}:typeof i!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function o(r,i,s){var f=new XMLHttpRequest;f.open("GET",r),f.responseType="blob",f.onload=function(){b(f.response,i,s)},f.onerror=function(){console.error("could not download file")},f.send()}function l(r){var i=new XMLHttpRequest;i.open("HEAD",r,!1);try{i.send()}catch{}return 200<=i.status&&299>=i.status}function a(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(i)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $=="object"&&$.global===$?$:void 0,y=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(r,i,s){var f=d.URL||d.webkitURL,_=document.createElement("a");i=i||r.name||"download",_.download=i,_.rel="noopener",typeof r=="string"?(_.href=r,_.origin===location.origin?a(_):l(_.href)?o(r,i,s):a(_,_.target="_blank")):(_.href=f.createObjectURL(r),setTimeout(function(){f.revokeObjectURL(_.href)},4e4),setTimeout(function(){a(_)},0))}:"msSaveOrOpenBlob"in navigator?function(r,i,s){if(i=i||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(n(r,s),i);else if(l(r))o(r,i,s);else{var f=document.createElement("a");f.href=r,f.target="_blank",setTimeout(function(){a(f)})}}:function(r,i,s,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof r=="string")return o(r,i,s);var _=r.type==="application/octet-stream",M=/constructor/i.test(d.HTMLElement)||d.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||_&&M||y)&&typeof FileReader<"u"){var u=new FileReader;u.onloadend=function(){var C=u.result;C=m?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=C:location=C,f=null},u.readAsDataURL(r)}else{var p=d.URL||d.webkitURL,w=p.createObjectURL(r);f?f.location=w:location.href=w,f=null,setTimeout(function(){p.revokeObjectURL(w)},4e4)}});d.saveAs=b.saveAs=b,e.exports=b})})(Ue);var ct=Ue.exports;function st(e){const t=document.createElement("img");return new Promise((n,o)=>{t.onload=()=>{n(t)},t.onerror=()=>{o(new Error("Something went wrong with retrieving the image."))},t.src=e})}const Pe={normal:"source-over",multiply:"multiply",overlay:"overlay","soft-light":"soft-light","hard-light":"hard-light"},ft=Object.keys(Pe);function pt(e,t,n){console.log("render layers");const{canvas:o,context:l,destroy:a}=V(e,t);for(const y of n.toReversed()){if(y.image==null)return;l.globalAlpha=y.opacity,l.globalCompositeOperation=Pe[y.blendingMode],l.drawImage(y.image,0,0)}const d=o.toDataURL("image/png");return a(),d}function dt(e,t=300){let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(null,o)},t)}}function ht(e,t,n){const o=e.slice();return o[27]=t[n],o}function xe(e){let t,n,o,l,a,d,y,b,r,i,s,f,_,M=$e(ft),m=[];for(let u=0;u<M.length;u+=1)m[u]=mt(ht(e,M,u));return{c(){t=h("button"),t.textContent="clear image",n=v(),o=h("label"),l=h("p"),l.textContent="Blending mode",a=v(),d=h("select");for(let u=0;u<m.length;u+=1)m[u].c();y=v(),b=h("label"),r=h("p"),r.textContent="Opacity",i=v(),s=h("input"),g(t,"type","button"),e[4]===void 0&&ie(()=>e[25].call(d)),s.value=e[3],g(s,"step",1),g(s,"type","number"),g(s,"min",0),g(s,"max",100)},m(u,p){P(u,t,p),P(u,n,p),P(u,o,p),c(o,l),c(o,a),c(o,d);for(let w=0;w<m.length;w+=1)m[w]&&m[w].m(d,null);Oe(d,e[4],!0),P(u,y,p),P(u,b,p),c(b,r),c(b,i),c(b,s),f||(_=[k(t,"click",e[13]),k(d,"change",e[25]),k(s,"input",e[14])],f=!0)},p(u,p){p&16&&Oe(d,u[4]),p&8&&s.value!==u[3]&&(s.value=u[3])},d(u){u&&(U(t),U(n),U(o),U(y),U(b)),He(m,u),f=!1,X(_)}}}function mt(e){let t;return{c(){t=h("option"),t.textContent=`${e[27]}`,t.__value=e[27],I(t,t.__value)},m(n,o){P(n,t,o)},p:W,d(n){n&&U(t)}}}function Re(e){let t,n;return{c(){t=h("img"),Me(t.src,n=e[10])||g(t,"src",n),g(t,"alt","The cool sonic texture"),g(t,"class","svelte-4ott4o")},m(o,l){P(o,t,l)},p(o,l){l&1024&&!Me(t.src,n=o[10])&&g(t,"src",n)},d(o){o&&U(t)}}}function gt(e){let t,n,o,l,a,d,y,b,r,i,s,f,_,M,m,u,p,w,C,O,F,A,N,H,T,te,D,J,ne,L,he,oe,me,Q,ge,_e,be,Y,ye,ae,we,ve,le,ue,Z,ce,Ee,x=e[5]&&xe(e),R=e[10]&&Re(e);return{c(){t=h("form"),n=h("label"),o=h("p"),o.textContent="width",l=v(),a=h("input"),d=v(),y=h("label"),b=h("p"),b.textContent="height",r=v(),i=h("input"),s=v(),f=h("label"),_=h("p"),_.textContent="grid size",M=v(),m=h("input"),u=v(),p=h("label"),w=h("p"),w.textContent="dot",C=v(),O=h("input"),F=v(),A=h("label"),N=h("p"),N.textContent="line",H=v(),T=h("input"),te=v(),D=h("label"),J=h("p"),J.textContent="posterization",ne=v(),L=h("input"),he=v(),oe=h("button"),oe.textContent="generate",me=v(),Q=h("button"),Q.textContent="save texture",ge=v(),_e=h("hr"),be=v(),Y=h("input"),ye=v(),x&&x.c(),ae=v(),we=h("hr"),ve=v(),le=h("p"),le.innerHTML=`Made by <a href="https://twitter.com/GnarlyNarley" target="_blank" rel="noopener noreferrer">Narley</a>
    with help from
    <a href="https://twitter.com/EroCopi" rel="noopener noreferrer">thehumancopier</a>, get
    <a href="https://thehumancopier.gumroad.com/l/crvee" rel="noopener noreferrer">here</a> his action for Clip Studio Paint.`,ue=v(),R&&R.c(),Z=qe(),g(a,"type","number"),g(i,"type","number"),g(m,"step",1),g(m,"type","range"),g(m,"min",5),g(m,"max",80),g(O,"step",.1),g(O,"type","range"),g(O,"min",0),g(O,"max",1),g(T,"step",.1),g(T,"type","range"),g(T,"min",0),g(T,"max",1),g(L,"step",1),g(L,"type","range"),g(L,"min",1),g(L,"max",5),g(oe,"type","submit"),g(Q,"type","button"),g(Y,"type","file"),g(Y,"accept","image/*"),g(le,"class","credits svelte-4ott4o"),g(t,"class","svelte-4ott4o")},m(E,j){P(E,t,j),c(t,n),c(n,o),c(n,l),c(n,a),I(a,e[1]),c(t,d),c(t,y),c(y,b),c(y,r),c(y,i),I(i,e[2]),c(t,s),c(t,f),c(f,_),c(f,M),c(f,m),I(m,e[6]),c(t,u),c(t,p),c(p,w),c(p,C),c(p,O),I(O,e[7]),c(t,F),c(t,A),c(A,N),c(A,H),c(A,T),I(T,e[8]),c(t,te),c(t,D),c(D,J),c(D,ne),c(D,L),I(L,e[9]),c(t,he),c(t,oe),c(t,me),c(t,Q),c(t,ge),c(t,_e),c(t,be),c(t,Y),c(t,ye),x&&x.m(t,null),c(t,ae),c(t,we),c(t,ve),c(t,le),P(E,ue,j),R&&R.m(E,j),P(E,Z,j),ce||(Ee=[k(a,"input",e[18]),k(i,"input",e[19]),k(m,"change",e[20]),k(m,"input",e[20]),k(O,"change",e[21]),k(O,"input",e[21]),k(T,"change",e[22]),k(T,"input",e[22]),k(L,"change",e[23]),k(L,"input",e[23]),k(Q,"click",e[12]),k(Y,"change",e[24]),k(t,"submit",e[11])],ce=!0)},p(E,[j]){j&2&&B(a.value)!==E[1]&&I(a,E[1]),j&4&&B(i.value)!==E[2]&&I(i,E[2]),j&64&&I(m,E[6]),j&128&&I(O,E[7]),j&256&&I(T,E[8]),j&512&&I(L,E[9]),E[5]?x?x.p(E,j):(x=xe(E),x.c(),x.m(t,ae)):x&&(x.d(1),x=null),E[10]?R?R.p(E,j):(R=Re(E),R.c(),R.m(Z.parentNode,Z)):R&&(R.d(1),R=null)},i:W,o:W,d(E){E&&(U(t),U(ue),U(Z)),x&&x.d(),R&&R.d(E),ce=!1,X(Ee)}}}function _t(e,t,n){let o,l,a=null,d=10,y=.7,b=.5,r=500,i=500,s=2,f,_=20,M="overlay",m=null,u=null;async function p(){const L=Math.random().toString();n(15,f=ut({gridSize:d,dotScale:y,lineScale:b,width:r,height:i,seed:L,posterizationRange:s}))}function w(L){L.preventDefault(),p()}function C(){l&&ct.saveAs(l,"texture.png")}function O(){n(0,a=null)}const F=dt(L=>{n(3,_=L.target.value)});We(()=>p());function A(){r=B(this.value),n(1,r),n(16,u),n(17,o),n(0,a)}function N(){i=B(this.value),n(2,i),n(16,u),n(17,o),n(0,a)}function H(){d=B(this.value),n(6,d)}function T(){y=B(this.value),n(7,y)}function te(){b=B(this.value),n(8,b)}function D(){s=B(this.value),n(9,s)}function J(){a=this.files,n(0,a)}function ne(){M=Ve(this),n(4,M)}return e.$$.update=()=>{e.$$.dirty&1&&n(17,o=(a==null?void 0:a[0])??null),e.$$.dirty&196608&&(u&&URL.revokeObjectURL(u),o?n(16,u=URL.createObjectURL(o)):(n(16,u=null),n(5,m=null)),u&&st(u).then(L=>{n(5,m=L),n(1,r=L.width),n(2,i=L.height),p()})),e.$$.dirty&32830&&n(10,l=pt(r,i,m?[{image:f,opacity:_/100,blendingMode:M},{image:m,opacity:1,blendingMode:"normal"}]:[{image:f,opacity:1,blendingMode:"normal"}]))},[a,r,i,_,M,m,d,y,b,s,l,w,C,O,F,f,u,o,A,N,H,T,te,D,J,ne]}class bt extends ot{constructor(t){super(),nt(this,t,_t,gt,De,{})}}new bt({target:document.getElementById("app")});
