var ft=Object.defineProperty;var dt=(t,e,n)=>e in t?ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>(dt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const v of l.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function G(){}function it(t){return t()}function lt(){return Object.create(null)}function H(t){t.forEach(it)}function ct(t){return typeof t=="function"}function pt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ht(t){return Object.keys(t).length===0}function i(t,e){t.appendChild(e)}function Y(t,e,n){t.insertBefore(e,n||null)}function K(t){t.parentNode&&t.parentNode.removeChild(t)}function _(t){return document.createElement(t)}function mt(t){return document.createTextNode(t)}function k(){return mt(" ")}function I(t,e,n,u){return t.addEventListener(e,n,u),()=>t.removeEventListener(e,n,u)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t){return t===""?null:+t}function _t(t){return Array.from(t.childNodes)}function N(t,e){t.value=e??""}let et;function W(t){et=t}const B=[],S=[];let D=[];const ut=[],gt=Promise.resolve();let z=!1;function bt(){z||(z=!0,gt.then(st))}function tt(t){D.push(t)}const Z=new Set;let U=0;function st(){if(U!==0)return;const t=et;do{try{for(;U<B.length;){const e=B[U];U++,W(e),yt(e.$$)}}catch(e){throw B.length=0,U=0,e}for(W(null),B.length=0,U=0;S.length;)S.pop()();for(let e=0;e<D.length;e+=1){const n=D[e];Z.has(n)||(Z.add(n),n())}D.length=0}while(B.length);for(;ut.length;)ut.pop()();z=!1,Z.clear(),W(t)}function yt(t){if(t.fragment!==null){t.update(),H(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(tt)}}function vt(t){const e=[],n=[];D.forEach(u=>t.indexOf(u)===-1?e.push(u):n.push(u)),n.forEach(u=>u()),D=e}const wt=new Set;function $t(t,e){t&&t.i&&(wt.delete(t),t.i(e))}function xt(t,e,n){const{fragment:u,after_update:r}=t.$$;u&&u.m(e,n),tt(()=>{const l=t.$$.on_mount.map(it).filter(ct);t.$$.on_destroy?t.$$.on_destroy.push(...l):H(l),t.$$.on_mount=[]}),r.forEach(tt)}function Ct(t,e){const n=t.$$;n.fragment!==null&&(vt(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kt(t,e){t.$$.dirty[0]===-1&&(B.push(t),bt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Et(t,e,n,u,r,l,v=null,$=[-1]){const g=et;W(t);const a=t.$$={fragment:null,ctx:[],props:l,update:G,not_equal:r,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(g?g.$$.context:[])),callbacks:lt(),dirty:$,skip_bound:!1,root:e.target||g.$$.root};v&&v(a.root);let p=!1;if(a.ctx=n?n(t,e.props||{},(w,E,...M)=>{const P=M.length?M[0]:E;return a.ctx&&r(a.ctx[w],a.ctx[w]=P)&&(!a.skip_bound&&a.bound[w]&&a.bound[w](P),p&&kt(t,w)),E}):[],a.update(),p=!0,H(a.before_update),a.fragment=u?u(a.ctx):!1,e.target){if(e.hydrate){const w=_t(e.target);a.fragment&&a.fragment.l(w),w.forEach(K)}else a.fragment&&a.fragment.c();e.intro&&$t(t.$$.fragment),xt(t,e.target,e.anchor),st()}W(g)}class Lt{constructor(){X(this,"$$");X(this,"$$set")}$destroy(){Ct(this,1),this.$destroy=G}$on(e,n){if(!ct(n))return G;const u=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return u.push(n),()=>{const r=u.indexOf(n);r!==-1&&u.splice(r,1)}}$set(e){this.$$set&&!ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ot="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ot);function at(t){if(t==null)throw new Error("Value is nullish.")}function Mt(t){for(var e=0,n=2166136261;e<t.length;e++)n=Math.imul(n^t.charCodeAt(e),16777619);n+=n<<13,n^=n>>>7,n+=n<<3,n^=n>>>17;let u=(n+=n<<5)>>>0,r=()=>(2**31-1&(u=Math.imul(48271,u)))/2**31;return r(),r}function Pt({canvas:t,gridSize:e,dotScale:n,lineWidth:u,width:r,height:l,seed:v}){const $=Mt(v);function g(s,m){const d=document.createElement("canvas"),o=d.getContext("2d");if(d.width=s,d.height=m,!o)throw new Error("Could not create context.");return{canvas:d,context:o,width:s,height:m}}function a(s,m,d,o){s.fillStyle="black",s.beginPath(),s.arc(m,d,o,0,Math.PI*2),s.closePath(),s.fill()}function p(s,m,d,o,c,f){s.lineWidth=f,s.strokeStyle="black",s.beginPath(),s.moveTo(m,d),s.lineTo(o,c),s.stroke()}function w({width:s,height:m},d,o,c){const f=o*c/2,y=g(o,o);a(y.context,0,0,f),a(y.context,o,0,f),a(y.context,0,o,f),a(y.context,o,o,f),a(y.context,o*.5,o*.5,f);const L=d.createPattern(y.canvas,"repeat");at(L),d.fillStyle=L,d.fillRect(0,0,s,m)}function E({width:s,height:m},d,o,c){const f=g(o,o);p(f.context,0,0,o,o,c),p(f.context,0,o,o,0,c);const y=g(o,o);p(y.context,0,0,o,o,c);const L=g(o,o);p(L.context,0,o,o,0,c);const j=[f,y,L];for(let x=0;x<s;x+=o)for(let R=0;R<m;R+=o){const O=j[Math.floor($()*3)];d.drawImage(O.canvas,x,R)}}function M(s,m,d){const o=m.getImageData(0,0,s.width,s.height),c=o.data;for(let f=0;f<c.length;f+=4){const y=c[f+0],L=c[f+1],j=c[f+2],x=c[f+3],R=(y+L+j)/3,O=Math.round(R/255*d)*255/d;c[f+0]=O,c[f+1]=O,c[f+2]=O,c[f+3]=Math.round(x/255)*255}m.putImageData(o,0,0)}const P=t.getContext("2d");at(P),t.width=r,t.height=l;const h=g(r,l);h.context.fillStyle="white",h.context.fillRect(0,0,r,l),E(h.canvas,h.context,e,u*e/2),w(h.canvas,h.context,e,n),M(h.canvas,h.context,5),P.drawImage(h.canvas,0,0,t.width,t.height)}function It(t,e=300){let n;return(...u)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(null,u)},e)}}function Nt(t){const e=document.createElement("a");e.setAttribute("download",t.name);const n=URL.createObjectURL(t);e.href=n,e.onclick=()=>{},e.click(),URL.revokeObjectURL(n),e.remove()}function At(t){let e,n,u,r,l,v,$,g,a,p,w,E,M,P,h,s,m,d,o,c,f,y,L,j,x,R,O,nt,F,ot,q,J,V,Q,rt;return{c(){e=_("div"),n=_("label"),u=_("p"),u.textContent="grid size",r=k(),l=_("input"),v=k(),$=_("label"),g=_("p"),g.textContent="dot",a=k(),p=_("input"),w=k(),E=_("label"),M=_("p"),M.textContent="line",P=k(),h=_("input"),s=k(),m=_("label"),d=_("p"),d.textContent="width",o=k(),c=_("input"),f=k(),y=_("label"),L=_("p"),L.textContent="height",j=k(),x=_("input"),R=k(),O=_("button"),O.textContent="regenerate",nt=k(),F=_("button"),F.textContent="save texture",ot=k(),q=_("p"),q.innerHTML=`Made by <a href="https://twitter.com/GnarlyNarley" target="_blank" rel="noopener noreferrer">Narley</a>
    with help from
    <a href="https://twitter.com/EroCopi" rel="noopener noreferrer">thehumancopier</a>, get
    <a href="https://thehumancopier.gumroad.com/l/crvee" rel="noopener noreferrer">here</a> his action for Clip Studio Paint.`,J=k(),V=_("canvas"),b(l,"step",1),b(l,"type","range"),b(l,"min",5),b(l,"max",80),b(p,"step",.1),b(p,"type","range"),b(p,"min",1),b(p,"max",10),b(h,"step",.1),b(h,"type","range"),b(h,"min",0),b(h,"max",5),b(c,"type","number"),b(x,"type","number"),b(O,"type","button"),b(F,"type","button"),b(q,"class","credits svelte-1d1kf9u"),b(e,"class","svelte-1d1kf9u"),b(V,"class","svelte-1d1kf9u")},m(C,A){Y(C,e,A),i(e,n),i(n,u),i(n,r),i(n,l),N(l,t[1]),i(e,v),i(e,$),i($,g),i($,a),i($,p),N(p,t[2]),i(e,w),i(e,E),i(E,M),i(E,P),i(E,h),N(h,t[3]),i(e,s),i(e,m),i(m,d),i(m,o),i(m,c),N(c,t[4]),i(e,f),i(e,y),i(y,L),i(y,j),i(y,x),N(x,t[5]),i(e,R),i(e,O),i(e,nt),i(e,F),i(e,ot),i(e,q),Y(C,J,A),Y(C,V,A),t[14](V),Q||(rt=[I(l,"change",t[9]),I(l,"input",t[9]),I(p,"change",t[10]),I(p,"input",t[10]),I(h,"change",t[11]),I(h,"input",t[11]),I(c,"input",t[12]),I(x,"input",t[13]),I(O,"click",t[6]),I(F,"click",t[7])],Q=!0)},p(C,[A]){A&2&&N(l,C[1]),A&4&&N(p,C[2]),A&8&&N(h,C[3]),A&16&&T(c.value)!==C[4]&&N(c,C[4]),A&32&&T(x.value)!==C[5]&&N(x,C[5])},i:G,o:G,d(C){C&&(K(e),K(J),K(V)),t[14](null),Q=!1,H(rt)}}}function Rt(t,e,n){const u=It(Pt,200);let r,l=20,v=5,$=4,g=1920,a=1080,p=Math.random().toString();function w(){n(8,p=Math.random().toString())}function E(){r&&r.toBlob(o=>{if(!o)return;const c=new File([o],"texture.png");Nt(c)},"image/png")}function M(){l=T(this.value),n(1,l)}function P(){v=T(this.value),n(2,v)}function h(){$=T(this.value),n(3,$)}function s(){g=T(this.value),n(4,g)}function m(){a=T(this.value),n(5,a)}function d(o){S[o?"unshift":"push"](()=>{r=o,n(0,r)})}return t.$$.update=()=>{t.$$.dirty&2&&console.log(l),t.$$.dirty&319&&r&&u({canvas:r,gridSize:l,dotScale:v/10,lineWidth:$/10,width:g,height:a,seed:p})},[r,l,v,$,g,a,w,E,p,M,P,h,s,m,d]}class Tt extends Lt{constructor(e){super(),Et(this,e,Rt,At,pt,{})}}new Tt({target:document.getElementById("app")});
