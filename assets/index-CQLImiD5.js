var at=Object.defineProperty;var st=(t,e,n)=>e in t?at(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>(st(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const v of r.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function q(){}function ut(t){return t()}function ot(){return Object.create(null)}function G(t){t.forEach(ut)}function ct(t){return typeof t=="function"}function ft(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function dt(t){return Object.keys(t).length===0}function a(t,e){t.appendChild(e)}function X(t,e,n){t.insertBefore(e,n||null)}function H(t){t.parentNode&&t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function pt(t){return document.createTextNode(t)}function k(){return pt(" ")}function M(t,e,n,u){return t.addEventListener(e,n,u),()=>t.removeEventListener(e,n,u)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t){return t===""?null:+t}function ht(t){return Array.from(t.childNodes)}function A(t,e){t.value=e??""}let tt;function W(t){tt=t}const B=[],Z=[];let D=[];const lt=[],mt=Promise.resolve();let S=!1;function _t(){S||(S=!0,mt.then(it))}function z(t){D.push(t)}const Y=new Set;let U=0;function it(){if(U!==0)return;const t=tt;do{try{for(;U<B.length;){const e=B[U];U++,W(e),gt(e.$$)}}catch(e){throw B.length=0,U=0,e}for(W(null),B.length=0,U=0;Z.length;)Z.pop()();for(let e=0;e<D.length;e+=1){const n=D[e];Y.has(n)||(Y.add(n),n())}D.length=0}while(B.length);for(;lt.length;)lt.pop()();S=!1,Y.clear(),W(t)}function gt(t){if(t.fragment!==null){t.update(),G(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}function bt(t){const e=[],n=[];D.forEach(u=>t.indexOf(u)===-1?e.push(u):n.push(u)),n.forEach(u=>u()),D=e}const yt=new Set;function vt(t,e){t&&t.i&&(yt.delete(t),t.i(e))}function wt(t,e,n){const{fragment:u,after_update:l}=t.$$;u&&u.m(e,n),z(()=>{const r=t.$$.on_mount.map(ut).filter(ct);t.$$.on_destroy?t.$$.on_destroy.push(...r):G(r),t.$$.on_mount=[]}),l.forEach(z)}function $t(t,e){const n=t.$$;n.fragment!==null&&(bt(n.after_update),G(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xt(t,e){t.$$.dirty[0]===-1&&(B.push(t),_t(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ct(t,e,n,u,l,r,v=null,$=[-1]){const _=tt;W(t);const c=t.$$={fragment:null,ctx:[],props:r,update:q,not_equal:l,bound:ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(_?_.$$.context:[])),callbacks:ot(),dirty:$,skip_bound:!1,root:e.target||_.$$.root};v&&v(c.root);let p=!1;if(c.ctx=n?n(t,e.props||{},(w,E,...P)=>{const I=P.length?P[0]:E;return c.ctx&&l(c.ctx[w],c.ctx[w]=I)&&(!c.skip_bound&&c.bound[w]&&c.bound[w](I),p&&xt(t,w)),E}):[],c.update(),p=!0,G(c.before_update),c.fragment=u?u(c.ctx):!1,e.target){if(e.hydrate){const w=ht(e.target);c.fragment&&c.fragment.l(w),w.forEach(H)}else c.fragment&&c.fragment.c();e.intro&&vt(t.$$.fragment),wt(t,e.target,e.anchor),it()}W(_)}class Et{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){$t(this,1),this.$destroy=q}$on(e,n){if(!ct(n))return q;const u=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return u.push(n),()=>{const l=u.indexOf(n);l!==-1&&u.splice(l,1)}}$set(e){this.$$set&&!dt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kt);function rt(t){if(t==null)throw new Error("Value is nullish.")}function Lt(t){for(var e=0,n=2166136261;e<t.length;e++)n=Math.imul(n^t.charCodeAt(e),16777619);n+=n<<13,n^=n>>>7,n+=n<<3,n^=n>>>17;let u=(n+=n<<5)>>>0,l=()=>(2**31-1&(u=Math.imul(48271,u)))/2**31;return l(),l}function Ot({canvas:t,gridSize:e,dotScale:n,lineWidth:u,width:l,height:r,seed:v}){const $=Lt(v);function _(s,m){const d=document.createElement("canvas"),o=d.getContext("2d");if(d.width=s,d.height=m,!o)throw new Error("Could not create context.");return{canvas:d,context:o,width:s,height:m}}function c(s,m,d,o){s.fillStyle="black",s.beginPath(),s.arc(m,d,o,0,Math.PI*2),s.closePath(),s.fill()}function p(s,m,d,o,i,f){s.lineWidth=f,s.strokeStyle="black",s.beginPath(),s.moveTo(m,d),s.lineTo(o,i),s.stroke()}function w({width:s,height:m},d,o,i){const f=o*i/2,y=_(o,o);c(y.context,0,0,f),c(y.context,o,0,f),c(y.context,0,o,f),c(y.context,o,o,f),c(y.context,o*.5,o*.5,f);const L=d.createPattern(y.canvas,"repeat");rt(L),d.fillStyle=L,d.fillRect(0,0,s,m)}function E({width:s,height:m},d,o,i){const f=_(o,o);p(f.context,0,0,o,o,i),p(f.context,0,o,o,0,i);const y=_(o,o);p(y.context,0,0,o,o,i);const L=_(o,o);p(L.context,0,o,o,0,i);const j=[f,y,L];for(let x=0;x<s;x+=o)for(let R=0;R<m;R+=o){const O=j[Math.floor($()*3)];d.drawImage(O.canvas,x,R)}}function P(s,m,d){const o=m.getImageData(0,0,s.width,s.height),i=o.data;for(let f=0;f<i.length;f+=4){const y=i[f+0],L=i[f+1],j=i[f+2],x=i[f+3],R=(y+L+j)/3,O=Math.round(R/255*d)*255/d;i[f+0]=O,i[f+1]=O,i[f+2]=O,i[f+3]=Math.round(x/255)*255}m.putImageData(o,0,0)}const I=t.getContext("2d");rt(I),t.width=l,t.height=r;const h=_(l,r);h.context.fillStyle="white",h.context.fillRect(0,0,l,r),E(h.canvas,h.context,e,u*e/2),w(h.canvas,h.context,e,n),P(h.canvas,h.context,5),I.drawImage(h.canvas,0,0,t.width,t.height)}function Pt(t,e=300){let n;return(...u)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(null,u)},e)}}function It(t){const e=document.createElement("a");e.setAttribute("download",t.name);const n=URL.createObjectURL(t);e.href=n,e.onclick=()=>{},e.click(),URL.revokeObjectURL(n),e.remove()}function Mt(t){let e,n,u,l,r,v,$,_,c,p,w,E,P,I,h,s,m,d,o,i,f,y,L,j,x,R,O,et,F,K,V,J,nt;return{c(){e=g("div"),n=g("label"),u=g("p"),u.textContent="grid size",l=k(),r=g("input"),v=k(),$=g("label"),_=g("p"),_.textContent="dot",c=k(),p=g("input"),w=k(),E=g("label"),P=g("p"),P.textContent="line",I=k(),h=g("input"),s=k(),m=g("label"),d=g("p"),d.textContent="width",o=k(),i=g("input"),f=k(),y=g("label"),L=g("p"),L.textContent="height",j=k(),x=g("input"),R=k(),O=g("button"),O.textContent="regenerate",et=k(),F=g("button"),F.textContent="save texture",K=k(),V=g("canvas"),b(r,"step",1),b(r,"type","range"),b(r,"min",5),b(r,"max",200),b(p,"step",.1),b(p,"type","range"),b(p,"min",1),b(p,"max",10),b(h,"step",.1),b(h,"type","range"),b(h,"min",0),b(h,"max",5),b(i,"type","number"),b(x,"type","number"),b(O,"type","button"),b(F,"type","button"),b(e,"class","svelte-1xo0r8p"),b(V,"class","svelte-1xo0r8p")},m(C,N){X(C,e,N),a(e,n),a(n,u),a(n,l),a(n,r),A(r,t[1]),a(e,v),a(e,$),a($,_),a($,c),a($,p),A(p,t[2]),a(e,w),a(e,E),a(E,P),a(E,I),a(E,h),A(h,t[3]),a(e,s),a(e,m),a(m,d),a(m,o),a(m,i),A(i,t[4]),a(e,f),a(e,y),a(y,L),a(y,j),a(y,x),A(x,t[5]),a(e,R),a(e,O),a(e,et),a(e,F),X(C,K,N),X(C,V,N),t[14](V),J||(nt=[M(r,"change",t[9]),M(r,"input",t[9]),M(p,"change",t[10]),M(p,"input",t[10]),M(h,"change",t[11]),M(h,"input",t[11]),M(i,"input",t[12]),M(x,"input",t[13]),M(O,"click",t[6]),M(F,"click",t[7])],J=!0)},p(C,[N]){N&2&&A(r,C[1]),N&4&&A(p,C[2]),N&8&&A(h,C[3]),N&16&&T(i.value)!==C[4]&&A(i,C[4]),N&32&&T(x.value)!==C[5]&&A(x,C[5])},i:q,o:q,d(C){C&&(H(e),H(K),H(V)),t[14](null),J=!1,G(nt)}}}function At(t,e,n){const u=Pt(Ot,200);let l,r=50,v=5,$=4,_=1920,c=1080,p=Math.random().toString();function w(){n(8,p=Math.random().toString())}function E(){l&&l.toBlob(o=>{if(!o)return;const i=new File([o],"texture.png");It(i)},"image/png")}function P(){r=T(this.value),n(1,r)}function I(){v=T(this.value),n(2,v)}function h(){$=T(this.value),n(3,$)}function s(){_=T(this.value),n(4,_)}function m(){c=T(this.value),n(5,c)}function d(o){Z[o?"unshift":"push"](()=>{l=o,n(0,l)})}return t.$$.update=()=>{t.$$.dirty&2&&console.log(r),t.$$.dirty&319&&l&&u({canvas:l,gridSize:r,dotScale:v/10,lineWidth:$/10,width:_,height:c,seed:p})},[l,r,v,$,_,c,w,E,p,P,I,h,s,m,d]}class Nt extends Et{constructor(e){super(),Ct(this,e,At,Mt,ft,{})}}new Nt({target:document.getElementById("app")});
