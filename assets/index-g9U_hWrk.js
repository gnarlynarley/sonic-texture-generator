var Ee=Object.defineProperty;var $e=(e,t,n)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oe=(e,t,n)=>($e(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function S(){}function ye(e){return e()}function de(){return Object.create(null)}function J(e){e.forEach(ye)}function be(e){return typeof e=="function"}function xe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Z;function pe(e,t){return e===t?!0:(Z||(Z=document.createElement("a")),Z.href=t,e===Z.href)}function Le(e){return Object.keys(e).length===0}function c(e,t){e.appendChild(t)}function z(e,t,n){e.insertBefore(t,n||null)}function V(e){e.parentNode&&e.parentNode.removeChild(e)}function v(e){return document.createElement(e)}function we(e){return document.createTextNode(e)}function j(){return we(" ")}function ke(){return we("")}function O(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function I(e){return e===""?null:+e}function Ce(e){return Array.from(e.childNodes)}function R(e,t){e.value=t??""}let X;function K(e){X=e}function je(){if(!X)throw new Error("Function called outside component initialization");return X}function Ae(e){je().$$.on_mount.push(e)}const D=[],he=[];let H=[];const me=[],Me=Promise.resolve();let le=!1;function Oe(){le||(le=!0,Me.then(ge))}function ae(e){H.push(e)}const re=new Set;let F=0;function ge(){if(F!==0)return;const e=X;do{try{for(;F<D.length;){const t=D[F];F++,K(t),Re(t.$$)}}catch(t){throw D.length=0,F=0,t}for(K(null),D.length=0,F=0;he.length;)he.pop()();for(let t=0;t<H.length;t+=1){const n=H[t];re.has(n)||(re.add(n),n())}H.length=0}while(D.length);for(;me.length;)me.pop()();le=!1,re.clear(),K(e)}function Re(e){if(e.fragment!==null){e.update(),J(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}function Te(e){const t=[],n=[];H.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),H=t}const Pe=new Set;function Ne(e,t){e&&e.i&&(Pe.delete(e),e.i(t))}function Ue(e,t,n){const{fragment:l,after_update:i}=e.$$;l&&l.m(t,n),ae(()=>{const s=e.$$.on_mount.map(ye).filter(be);e.$$.on_destroy?e.$$.on_destroy.push(...s):J(s),e.$$.on_mount=[]}),i.forEach(ae)}function Ie(e,t){const n=e.$$;n.fragment!==null&&(Te(n.after_update),J(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Be(e,t){e.$$.dirty[0]===-1&&(D.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Fe(e,t,n,l,i,s,h=null,k=[-1]){const b=X;K(e);const o=e.$$={fragment:null,ctx:[],props:s,update:S,not_equal:i,bound:de(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(b?b.$$.context:[])),callbacks:de(),dirty:k,skip_bound:!1,root:t.target||b.$$.root};h&&h(o.root);let a=!1;if(o.ctx=n?n(e,t.props||{},(m,u,...w)=>{const E=w.length?w[0]:u;return o.ctx&&i(o.ctx[m],o.ctx[m]=E)&&(!o.skip_bound&&o.bound[m]&&o.bound[m](E),a&&Be(e,m)),u}):[],o.update(),a=!0,J(o.before_update),o.fragment=l?l(o.ctx):!1,t.target){if(t.hydrate){const m=Ce(t.target);o.fragment&&o.fragment.l(m),m.forEach(V)}else o.fragment&&o.fragment.c();t.intro&&Ne(e.$$.fragment),Ue(e,t.target,t.anchor),ge()}K(b)}class De{constructor(){oe(this,"$$");oe(this,"$$set")}$destroy(){Ie(this,1),this.$destroy=S}$on(t,n){if(!be(n))return S;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!Le(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const He="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(He);function qe(e){if(e==null)throw new Error("Value is nullish.")}function We(e){for(var t=0,n=2166136261;t<e.length;t++)n=Math.imul(n^e.charCodeAt(t),16777619);n+=n<<13,n^=n>>>7,n+=n<<3,n^=n>>>17;let l=(n+=n<<5)>>>0,i=()=>(2**31-1&(l=Math.imul(48271,l)))/2**31;return i(),i}function Ge({gridSize:e,dotScale:t,lineWidth:n,width:l,height:i,posterizationRange:s,seed:h}){const k=We(h);function b(d,g){const p=document.createElement("canvas"),r=p.getContext("2d");if(p.width=d,p.height=g,!r)throw new Error("Could not create context.");return{canvas:p,context:r,width:d,height:g,destroy(){p.width=0,p.height=0}}}function o(d,g,p,r){d.fillStyle="black",d.beginPath(),d.arc(g,p,r,0,Math.PI*2),d.closePath(),d.fill()}function a(d,g,p,r,f,y){d.lineWidth=y,d.strokeStyle="black",d.beginPath(),d.moveTo(g,p),d.lineTo(r,f),d.stroke()}function m({width:d,height:g},p,r,f){const y=r*f/2,x=b(r,r);o(x.context,0,0,y),o(x.context,r,0,y),o(x.context,0,r,y),o(x.context,r,r,y),o(x.context,r*.5,r*.5,y);const T=p.createPattern(x.canvas,"repeat");qe(T),p.fillStyle=T,p.fillRect(0,0,d,g),x.destroy()}function u({width:d,height:g},p,r,f){const y=b(r,r);a(y.context,0,0,r,r,f),a(y.context,0,r,r,0,f);const x=b(r,r);a(x.context,0,0,r,r,f);const T=b(r,r);a(T.context,0,r,r,0,f);const B=[y,x,T];for(let L=0;L<d;L+=r)for(let U=0;U<g;U+=r){const P=B[Math.floor(k()*3)];p.drawImage(P.canvas,L,U)}B.forEach(L=>L.destroy())}function w(d,g,p){const r=g.getImageData(0,0,d.width,d.height),f=r.data;for(let y=0;y<f.length;y+=4){const x=f[y+0],T=f[y+1],B=f[y+2],L=f[y+3],U=(x+T+B)/3,P=Math.round(U/255*p)*255/p;f[y+0]=P,f[y+1]=P,f[y+2]=P,f[y+3]=Math.round(L/255)*255}g.putImageData(r,0,0)}const E=b(l,i);E.context.fillStyle="white",E.context.fillRect(0,0,l,i),u(E.canvas,E.context,e,n*e/2),m(E.canvas,E.context,e,t),w(E.canvas,E.context,s);const C=E.canvas.toDataURL();return E.destroy(),C}var G=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ve={exports:{}};(function(e,t){(function(n,l){l()})(G,function(){function n(o,a){return typeof a>"u"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function l(o,a,m){var u=new XMLHttpRequest;u.open("GET",o),u.responseType="blob",u.onload=function(){b(u.response,a,m)},u.onerror=function(){console.error("could not download file")},u.send()}function i(o){var a=new XMLHttpRequest;a.open("HEAD",o,!1);try{a.send()}catch{}return 200<=a.status&&299>=a.status}function s(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(a)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof G=="object"&&G.global===G?G:void 0,k=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!k?function(o,a,m){var u=h.URL||h.webkitURL,w=document.createElement("a");a=a||o.name||"download",w.download=a,w.rel="noopener",typeof o=="string"?(w.href=o,w.origin===location.origin?s(w):i(w.href)?l(o,a,m):s(w,w.target="_blank")):(w.href=u.createObjectURL(o),setTimeout(function(){u.revokeObjectURL(w.href)},4e4),setTimeout(function(){s(w)},0))}:"msSaveOrOpenBlob"in navigator?function(o,a,m){if(a=a||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(n(o,m),a);else if(i(o))l(o,a,m);else{var u=document.createElement("a");u.href=o,u.target="_blank",setTimeout(function(){s(u)})}}:function(o,a,m,u){if(u=u||open("","_blank"),u&&(u.document.title=u.document.body.innerText="downloading..."),typeof o=="string")return l(o,a,m);var w=o.type==="application/octet-stream",E=/constructor/i.test(h.HTMLElement)||h.safari,C=/CriOS\/[\d]+/.test(navigator.userAgent);if((C||w&&E||k)&&typeof FileReader<"u"){var d=new FileReader;d.onloadend=function(){var r=d.result;r=C?r:r.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=r:location=r,u=null},d.readAsDataURL(o)}else{var g=h.URL||h.webkitURL,p=g.createObjectURL(o);u?u.location=p:location.href=p,u=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});h.saveAs=b.saveAs=b,e.exports=b})})(ve);var Ve=ve.exports;function _e(e){let t,n;return{c(){t=v("img"),pe(t.src,n=e[6])||_(t,"src",n),_(t,"alt","The cool sonic texture"),_(t,"class","svelte-1a1jswm")},m(l,i){z(l,t,i)},p(l,i){i&64&&!pe(t.src,n=l[6])&&_(t,"src",n)},d(l){l&&V(t)}}}function Ke(e){let t,n,l,i,s,h,k,b,o,a,m,u,w,E,C,d,g,p,r,f,y,x,T,B,L,U,P,ee,ie,N,ue,Q,se,q,ce,Y,te,W,ne,fe,A=e[6]&&_e(e);return{c(){t=v("form"),n=v("label"),l=v("p"),l.textContent="width",i=j(),s=v("input"),h=j(),k=v("label"),b=v("p"),b.textContent="height",o=j(),a=v("input"),m=j(),u=v("label"),w=v("p"),w.textContent="grid size",E=j(),C=v("input"),d=j(),g=v("label"),p=v("p"),p.textContent="dot",r=j(),f=v("input"),y=j(),x=v("label"),T=v("p"),T.textContent="line",B=j(),L=v("input"),U=j(),P=v("label"),ee=v("p"),ee.textContent="posterization",ie=j(),N=v("input"),ue=j(),Q=v("button"),Q.textContent="generate",se=j(),q=v("button"),q.textContent="save texture",ce=j(),Y=v("p"),Y.innerHTML=`Made by <a href="https://twitter.com/GnarlyNarley" target="_blank" rel="noopener noreferrer">Narley</a>
    with help from
    <a href="https://twitter.com/EroCopi" rel="noopener noreferrer">thehumancopier</a>, get
    <a href="https://thehumancopier.gumroad.com/l/crvee" rel="noopener noreferrer">here</a> his action for Clip Studio Paint.`,te=j(),A&&A.c(),W=ke(),_(s,"type","number"),_(a,"type","number"),_(C,"step",1),_(C,"type","range"),_(C,"min",5),_(C,"max",80),_(f,"step",.1),_(f,"type","range"),_(f,"min",1),_(f,"max",10),_(L,"step",.1),_(L,"type","range"),_(L,"min",0),_(L,"max",5),_(N,"step",1),_(N,"type","range"),_(N,"min",1),_(N,"max",5),_(Q,"type","submit"),_(q,"type","button"),_(Y,"class","credits svelte-1a1jswm"),_(t,"class","svelte-1a1jswm")},m($,M){z($,t,M),c(t,n),c(n,l),c(n,i),c(n,s),R(s,e[3]),c(t,h),c(t,k),c(k,b),c(k,o),c(k,a),R(a,e[4]),c(t,m),c(t,u),c(u,w),c(u,E),c(u,C),R(C,e[0]),c(t,d),c(t,g),c(g,p),c(g,r),c(g,f),R(f,e[1]),c(t,y),c(t,x),c(x,T),c(x,B),c(x,L),R(L,e[2]),c(t,U),c(t,P),c(P,ee),c(P,ie),c(P,N),R(N,e[5]),c(t,ue),c(t,Q),c(t,se),c(t,q),c(t,ce),c(t,Y),z($,te,M),A&&A.m($,M),z($,W,M),ne||(fe=[O(s,"input",e[9]),O(a,"input",e[10]),O(C,"change",e[11]),O(C,"input",e[11]),O(f,"change",e[12]),O(f,"input",e[12]),O(L,"change",e[13]),O(L,"input",e[13]),O(N,"change",e[14]),O(N,"input",e[14]),O(q,"click",e[8]),O(t,"submit",e[7])],ne=!0)},p($,[M]){M&8&&I(s.value)!==$[3]&&R(s,$[3]),M&16&&I(a.value)!==$[4]&&R(a,$[4]),M&1&&R(C,$[0]),M&2&&R(f,$[1]),M&4&&R(L,$[2]),M&32&&R(N,$[5]),$[6]?A?A.p($,M):(A=_e($),A.c(),A.m(W.parentNode,W)):A&&(A.d(1),A=null)},i:S,o:S,d($){$&&(V(t),V(te),V(W)),A&&A.d($),ne=!1,J(fe)}}}function Se(e,t,n){let l=20,i=5,s=4,h=500,k=500,b=2,o=null;a();function a(){const r=Math.random().toString(),f=Ge({gridSize:l,dotScale:i/10,lineWidth:s/10,width:h,height:k,seed:r,posterizationRange:b});return n(6,o=f),f}function m(r){r.preventDefault(),a()}function u(){o&&Ve.saveAs(o,"texture.png")}Ae(()=>a());function w(){h=I(this.value),n(3,h)}function E(){k=I(this.value),n(4,k)}function C(){l=I(this.value),n(0,l)}function d(){i=I(this.value),n(1,i)}function g(){s=I(this.value),n(2,s)}function p(){b=I(this.value),n(5,b)}return[l,i,s,h,k,b,o,m,u,w,E,C,d,g,p]}class Xe extends De{constructor(t){super(),Fe(this,t,Se,Ke,xe,{})}}new Xe({target:document.getElementById("app")});
